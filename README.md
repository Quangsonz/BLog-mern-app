# ğŸ“ Fullstack Blog - MERN Stack

> á»¨ng dá»¥ng blog full-stack toÃ n diá»‡n Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i **React**, **Material-UI**, **Node.js**, **Express**, vÃ  **MongoDB**. Bao gá»“m thÃ´ng bÃ¡o theo thá»i gian thá»±c, tÃ¬m kiáº¿m nÃ¢ng cao, báº£ng Ä‘iá»u khiá»ƒn quáº£n trá»‹ vÃ  UI/UX hiá»‡n Ä‘áº¡i.

![Trang chá»§](frontend/src/images/home.png)
![Chi tiáº¿t bÃ i viáº¿t](frontend/src/images/post.png)

---

## ğŸš€ TÃ­nh nÄƒng

### TÃ­nh nÄƒng cá»‘t lÃµi
- âœ… **XÃ¡c thá»±c & PhÃ¢n quyá»n** - ÄÄƒng nháº­p/Ä‘Äƒng kÃ½ báº£o máº­t dá»±a trÃªn JWT vá»›i kiá»ƒm soÃ¡t truy cáº­p theo vai trÃ² (Admin/User)
- âœ… **ThÃ´ng bÃ¡o thá»i gian thá»±c** - ThÃ´ng bÃ¡o trá»±c tiáº¿p Ä‘Æ°á»£c há»— trá»£ bá»Ÿi Socket.io cho lÆ°á»£t thÃ­ch, bÃ¬nh luáº­n vÃ  tÆ°Æ¡ng tÃ¡c
- âœ… **TÃ¬m kiáº¿m nÃ¢ng cao** - TÃ¬m kiáº¿m thÃ´ng minh vá»›i khá»›p má», tÃ­nh Ä‘iá»ƒm liÃªn quan vÃ  nhiá»u tÃ¹y chá»n sáº¯p xáº¿p
- âœ… **Báº£ng Ä‘iá»u khiá»ƒn Admin** - PhÃ¢n tÃ­ch toÃ n diá»‡n, quáº£n lÃ½ ngÆ°á»i dÃ¹ng, quáº£n lÃ½ bÃ i viáº¿t vÃ  quáº£n lÃ½ liÃªn há»‡
- âœ… **TrÃ¬nh soáº¡n tháº£o vÄƒn báº£n phong phÃº** - TÃ­ch há»£p ReactQuill Ä‘á»ƒ táº¡o bÃ i viáº¿t blog Ä‘áº¹p máº¯t
- âœ… **Táº£i lÃªn hÃ¬nh áº£nh** - TÃ­ch há»£p Cloudinary Ä‘á»ƒ lÆ°u trá»¯ vÃ  tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh
- âœ… **Thiáº¿t káº¿ responsive** - Giao diá»‡n responsive Æ°u tiÃªn mobile vá»›i cÃ¡c component Material-UI
- âœ… **XÃ¡c thá»±c form** - Formik & Yup cho xÃ¡c thá»±c phÃ­a client máº¡nh máº½
- âœ… **PhÃ¢n trang & DataGrid** - Hiá»ƒn thá»‹ dá»¯ liá»‡u hiá»‡u quáº£ vá»›i @mui/x-data-grid
- âœ… **Danh má»¥c & Tháº»** - Tá»• chá»©c bÃ i viáº¿t theo danh má»¥c vá»›i chá»§ Ä‘á» thá»‹nh hÃ nh
- âœ… **Há»‡ thá»‘ng Like & Comment** - TÆ°Æ¡ng tÃ¡c thá»i gian thá»±c vá»›i socket.io
- âœ… **Há»“ sÆ¡ ngÆ°á»i dÃ¹ng** - Há»“ sÆ¡ cÃ¡ nhÃ¢n vá»›i táº£i lÃªn avatar vÃ  theo dÃµi hoáº¡t Ä‘á»™ng
- âœ… **Form liÃªn há»‡** - Há»‡ thá»‘ng quáº£n lÃ½ liÃªn há»‡ tÃ­ch há»£p vá»›i theo dÃµi tráº¡ng thÃ¡i
- âœ… **Báº£o máº­t** - Helmet, giá»›i háº¡n tá»‘c Ä‘á»™, báº£o vá»‡ XSS vÃ  lÃ m sáº¡ch Ä‘áº§u vÃ o

### TÃ­nh nÄƒng nÃ¢ng cao
- ğŸ”¥ **Chá»§ Ä‘á» thá»‹nh hÃ nh** - Chá»§ Ä‘á» thá»‹nh hÃ nh Ä‘á»™ng dá»±a trÃªn má»©c Ä‘á»™ tÆ°Æ¡ng tÃ¡c bÃ i viáº¿t
- ğŸ‘¥ **NgÆ°á»i dÃ¹ng Ä‘Æ°á»£c Ä‘á» xuáº¥t** - Äá» xuáº¥t ngÆ°á»i dÃ¹ng dá»±a trÃªn thuáº­t toÃ¡n
- ğŸ¯ **Bá»™ lá»c thÃ´ng minh** - Bá»™ lá»c danh má»¥c vÃ  sáº¯p xáº¿p trÃªn trang chá»§
- ğŸ“Š **Báº£ng phÃ¢n tÃ­ch** - Thá»‘ng kÃª chi tiáº¿t cho quáº£n trá»‹ viÃªn
- ğŸ”” **Cáº­p nháº­t thá»i gian thá»±c** - LÆ°á»£t thÃ­ch, bÃ¬nh luáº­n vÃ  thÃ´ng bÃ¡o trá»±c tiáº¿p
- ğŸ¨ **UI/UX hiá»‡n Ä‘áº¡i** - Thiáº¿t káº¿ gradient, hiá»‡u á»©ng mÆ°á»£t mÃ  vÃ  Ä‘iá»u hÆ°á»›ng trá»±c quan

---

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
BLog-mern-app/
â”‚
â”œâ”€â”€ ğŸ“‚ backend/                          # Backend Node.js/Express server
â”‚   â”œâ”€â”€ ğŸ“‚ controllers/                  # Xá»­ lÃ½ yÃªu cáº§u vÃ  logic nghiá»‡p vá»¥
â”‚   â”‚   â”œâ”€â”€ authController.js           # XÃ¡c thá»±c (Ä‘Äƒng nháº­p, Ä‘Äƒng kÃ½, há»“ sÆ¡, Ä‘Äƒng xuáº¥t)
â”‚   â”‚   â”œâ”€â”€ postController.js           # CRUD bÃ i viáº¿t, like/unlike, bÃ¬nh luáº­n, tÃ¬m kiáº¿m, thá»‹nh hÃ nh
â”‚   â”‚   â”œâ”€â”€ notificationController.js   # CRUD thÃ´ng bÃ¡o vÃ  cÃ¡c hÃ m há»— trá»£
â”‚   â”‚   â””â”€â”€ contactController.js        # Quáº£n lÃ½ form liÃªn há»‡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/                       # Mongoose schemas (MÃ´ hÃ¬nh dá»¯ liá»‡u)
â”‚   â”‚   â”œâ”€â”€ userModel.js                # Schema ngÆ°á»i dÃ¹ng (tÃªn, email, máº­t kháº©u, avatar, vai trÃ², phÆ°Æ¡ng thá»©c JWT)
â”‚   â”‚   â”œâ”€â”€ postModel.js                # Schema bÃ i viáº¿t (danh má»¥c, ná»™i dung, hÃ¬nh áº£nh, lÆ°á»£t thÃ­ch, bÃ¬nh luáº­n)
â”‚   â”‚   â”œâ”€â”€ categoryModel.js            # Schema danh má»¥c
â”‚   â”‚   â”œâ”€â”€ notificationModel.js        # Schema thÃ´ng bÃ¡o (ngÆ°á»i gá»­i, ngÆ°á»i nháº­n, bÃ i viáº¿t, loáº¡i, tin nháº¯n)
â”‚   â”‚   â””â”€â”€ contactModel.js             # Schema liÃªn há»‡ (tÃªn, email, chá»§ Ä‘á», tin nháº¯n, tráº¡ng thÃ¡i)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ middleware/                   # Express middleware
â”‚   â”‚   â”œâ”€â”€ auth.js                     # XÃ¡c thá»±c JWT & phÃ¢n quyá»n admin
â”‚   â”‚   â””â”€â”€ error.js                    # Middleware xá»­ lÃ½ lá»—i toÃ n cá»¥c
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ routes/                       # CÃ¡c route API
â”‚   â”‚   â”œâ”€â”€ authRoutes.js               # /api/signup, /api/signin, /api/logout, /api/me, /api/users
â”‚   â”‚   â”œâ”€â”€ postRoute.js                # /api/posts/*, /api/post/*, thá»‹nh hÃ nh, ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c Ä‘á» xuáº¥t
â”‚   â”‚   â”œâ”€â”€ notificationRoutes.js       # /api/notifications/*
â”‚   â”‚   â””â”€â”€ contactRoutes.js            # /api/contacts/*, /api/contact/*
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ utils/                        # CÃ¡c hÃ m tiá»‡n Ã­ch
â”‚   â”‚   â”œâ”€â”€ cloudinary.js               # Cáº¥u hÃ¬nh Cloudinary cho táº£i lÃªn hÃ¬nh áº£nh
â”‚   â”‚   â””â”€â”€ errorResponse.js            # Class pháº£n há»“i lá»—i tÃ¹y chá»‰nh
â”‚   â”‚
â”‚   â”œâ”€â”€ app.js                           # á»¨ng dá»¥ng Express chÃ­nh (middleware, routes, socket.io, xá»­ lÃ½ lá»—i)
â”‚   â””â”€â”€ .env                             # Biáº¿n mÃ´i trÆ°á»ng (DB, JWT, Cloudinary, PORT)
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                         # á»¨ng dá»¥ng React Frontend
â”‚   â”œâ”€â”€ ğŸ“‚ public/                       # CÃ¡c file tÄ©nh
â”‚   â”‚   â”œâ”€â”€ index.html                  # Template HTML gá»‘c
â”‚   â”‚   â”œâ”€â”€ manifest.json               # PWA manifest
â”‚   â”‚   â””â”€â”€ robots.txt                  # File robots cho SEO
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ src/                          # MÃ£ nguá»“n React
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ admin/                    # Trang dÃ nh cho Admin (yÃªu cáº§u vai trÃ² admin)
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboard.js       # Báº£ng phÃ¢n tÃ­ch (thá»‘ng kÃª, biá»ƒu Ä‘á»“, bÃ i viáº¿t/ngÆ°á»i dÃ¹ng hÃ ng Ä‘áº§u)
â”‚   â”‚   â”‚   â”œâ”€â”€ CreatePost.js           # Form táº¡o bÃ i viáº¿t blog má»›i (ReactQuill, Dropzone)
â”‚   â”‚   â”‚   â”œâ”€â”€ EditPost.js             # Form chá»‰nh sá»­a bÃ i viáº¿t hiá»‡n cÃ³
â”‚   â”‚   â”‚   â”œâ”€â”€ ManagePosts.js          # DataGrid quáº£n lÃ½ táº¥t cáº£ bÃ i viáº¿t (sá»­a, xÃ³a, tÃ¬m kiáº¿m)
â”‚   â”‚   â”‚   â”œâ”€â”€ ManageUsers.js          # DataGrid quáº£n lÃ½ ngÆ°á»i dÃ¹ng (Ä‘á»•i vai trÃ², xÃ³a)
â”‚   â”‚   â”‚   â”œâ”€â”€ ManageContacts.js       # Quáº£n lÃ½ tin nháº¯n liÃªn há»‡ (tráº£ lá»i, Ä‘á»•i tráº¡ng thÃ¡i)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ global/               # CÃ¡c component layout Admin
â”‚   â”‚   â”‚       â”œâ”€â”€ Layout.js            # HOC wrapper cho trang admin (Sidebar + HeaderTop)
â”‚   â”‚   â”‚       â”œâ”€â”€ HeaderTop.js         # Header admin vá»›i nÃºt toggle sidebar
â”‚   â”‚   â”‚       â””â”€â”€ Sidebar.js           # Sidebar Ä‘iá»u hÆ°á»›ng admin (ProSidebar)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/               # CÃ¡c component React cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.js                # Thanh Ä‘iá»u hÆ°á»›ng chÃ­nh (tÃ¬m kiáº¿m, thÃ´ng bÃ¡o, menu ngÆ°á»i dÃ¹ng)
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.js                # Footer vá»›i liÃªn káº¿t vÃ  máº¡ng xÃ£ há»™i
â”‚   â”‚   â”‚   â”œâ”€â”€ PostCard.js              # Card bÃ i viáº¿t kiá»ƒu Instagram (like, comment, edit/delete)
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentList.js           # Component hiá»ƒn thá»‹ má»™t bÃ¬nh luáº­n
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationMenu.js      # Menu dropdown thÃ´ng bÃ¡o vá»›i cáº­p nháº­t thá»i gian thá»±c
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartSearch.jsx          # Component tÃ¬m kiáº¿m nÃ¢ng cao vá»›i tá»± Ä‘á»™ng hoÃ n thÃ nh
â”‚   â”‚   â”‚   â”œâ”€â”€ Loader.js                # Component vÃ²ng xoay loading
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminRoute.js            # Wrapper (lá»›p bá»c) route báº£o vá»‡ cho trang admin
â”‚   â”‚   â”‚   â”œâ”€â”€ UserRoute.js             # Wrapper route báº£o vá»‡ cho ngÆ°á»i dÃ¹ng Ä‘Ã£ xÃ¡c thá»±c
â”‚   â”‚   â”‚   â””â”€â”€ moduleToolbar.js         # Cáº¥u hÃ¬nh thanh cÃ´ng cá»¥ ReactQuill
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pages/                    # CÃ¡c trang chÃ­nh cá»§a á»©ng dá»¥ng
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.js                  # Trang chá»§ (nguá»“n cáº¥p bÃ i viáº¿t, sidebar thá»‹nh hÃ nh, bá»™ lá»c, táº¡o bÃ i viáº¿t)
â”‚   â”‚   â”‚   â”œâ”€â”€ SinglePost.js            # Trang chi tiáº¿t bÃ i viáº¿t (ná»™i dung Ä‘áº§y Ä‘á»§, bÃ¬nh luáº­n, edit/delete)
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchResults.js         # Trang káº¿t quáº£ tÃ¬m kiáº¿m vá»›i bá»™ lá»c nÃ¢ng cao
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.js               # Trang há»“ sÆ¡ ngÆ°á»i dÃ¹ng (sá»­a thÃ´ng tin, táº£i avatar, Ä‘á»•i máº­t kháº©u)
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthPage.js              # Trang ÄÄƒng nháº­p/ÄÄƒng kÃ½ vá»›i chuyá»ƒn Ä‘á»•i (xÃ¡c thá»±c Formik)
â”‚   â”‚   â”‚   â”œâ”€â”€ EditPostUser.js          # Trang chá»‰nh sá»­a bÃ i viáº¿t cá»§a ngÆ°á»i dÃ¹ng
â”‚   â”‚   â”‚   â”œâ”€â”€ About.js                 # Trang Giá»›i thiá»‡u
â”‚   â”‚   â”‚   â”œâ”€â”€ Contact.js               # Trang form liÃªn há»‡
â”‚   â”‚   â”‚   â”œâ”€â”€ Privacy.js               # Trang ChÃ­nh sÃ¡ch báº£o máº­t
â”‚   â”‚   â”‚   â”œâ”€â”€ NotFound.js              # Trang lá»—i 404
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ LayoutPage/
â”‚   â”‚   â”‚       â””â”€â”€ Layout.js            # Wrapper layout chung
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ redux/                    # Quáº£n lÃ½ state Redux
â”‚   â”‚   â”‚   â”œâ”€â”€ store.js                 # Cáº¥u hÃ¬nh Redux store (reducers, middleware, devtools)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ actions/              # Redux action creators
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ userAction.js        # Actions ngÆ°á»i dÃ¹ng (login, register, logout, profile)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notificationActions.js # Actions thÃ´ng bÃ¡o (load, Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c, thÃªm má»›i)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ constants/            # CÃ¡c háº±ng sá»‘ kiá»ƒu action Redux
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ userConstant.js      # CÃ¡c kiá»ƒu action ngÆ°á»i dÃ¹ng (SIGNIN, SIGNUP, LOGOUT, LOAD)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ reducers/             # Redux reducers
â”‚   â”‚   â”‚       â”œâ”€â”€ userReducer.js       # Reducers ngÆ°á»i dÃ¹ng (signIn, signUp, profile, logout)
â”‚   â”‚   â”‚       â””â”€â”€ notificationReducer.js # Reducer thÃ´ng bÃ¡o (load, Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c, thÃªm má»›i)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ user/                     # Báº£ng Ä‘iá»u khiá»ƒn ngÆ°á»i dÃ¹ng
â”‚   â”‚   â”‚   â””â”€â”€ UserDashboard.js         # Trang báº£ng Ä‘iá»u khiá»ƒn ngÆ°á»i dÃ¹ng (tÃ³m táº¯t há»“ sÆ¡)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.js                       # á»¨ng dá»¥ng React chÃ­nh (routes, providers)
â”‚   â”‚   â”œâ”€â”€ App.css                      # Styles toÃ n cá»¥c cá»§a app
â”‚   â”‚   â”œâ”€â”€ index.js                     # Äiá»ƒm vÃ o React (render App)
â”‚   â”‚   â”œâ”€â”€ index.css                    # Styles CSS toÃ n cá»¥c
â”‚   â”‚   â””â”€â”€ setupTests.js                # Cáº¥u hÃ¬nh testing Jest
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json                     # CÃ¡c phá»¥ thuá»™c Frontend
â”‚   â””â”€â”€ .env                             # Biáº¿n mÃ´i trÆ°á»ng Frontend (cáº¥u hÃ¬nh proxy)
â”‚
â”œâ”€â”€ ğŸ“„ package.json                      # package.json gá»‘c (scripts)
â”œâ”€â”€ ğŸ“„ README.md                         # TÃ i liá»‡u dá»± Ã¡n (file nÃ y)
â”œâ”€â”€ ğŸ“„ FILTER_FEATURE_DOCUMENTATION.md   # TÃ i liá»‡u tÃ­nh nÄƒng lá»c & sáº¯p xáº¿p
â”œâ”€â”€ ğŸ“„ MIGRATION_NOTES.md                # Ghi chÃº di chuyá»ƒn cho socket.io vÃ  tÃ­nh nÄƒng
â””â”€â”€ ğŸ“„ SEARCH_ALGORITHMS_ANALYSIS.md     # Chi tiáº¿t triá»ƒn khai thuáº­t toÃ¡n tÃ¬m kiáº¿m
```

---

## ğŸ”— Má»‘i quan há»‡ giá»¯a cÃ¡c File & Luá»“ng dá»¯ liá»‡u

### Kiáº¿n trÃºc Backend

#### **1. Äiá»ƒm vÃ o: `app.js`**
```
app.js â†’ Khá»Ÿi táº¡o Express server
    â†“
    â”œâ”€â”€ Káº¿t ná»‘i MongoDB
    â”œâ”€â”€ Thiáº¿t láº­p middleware (helmet, cors, rate limiting, mongoSanitize)
    â”œâ”€â”€ Cáº¥u hÃ¬nh Socket.io cho tÃ­nh nÄƒng thá»i gian thá»±c
    â”œâ”€â”€ Gáº¯n cÃ¡c API routes
    â””â”€â”€ Khá»Ÿi Ä‘á»™ng trÃ¬nh xá»­ lÃ½ lá»—i toÃ n cá»¥c
```

#### **2. Luá»“ng Route**
```
YÃªu cáº§u Client â†’ Routes â†’ Middleware (auth.js) â†’ Controllers â†’ Models â†’ Database
                                    â†“
                                Pháº£n há»“i
```

**VÃ­ dá»¥: Táº¡o má»™t bÃ i viáº¿t**
```
POST /api/post/create
    â†“
postRoute.js â†’ isAuthenticated middleware (auth.js)
    â†“
postController.js â†’ createPost()
    â†“
postModel.js â†’ XÃ¡c thá»±c schema Mongoose
    â†“
MongoDB â†’ LÆ°u bÃ i viáº¿t
    â†“
cloudinary.js â†’ Táº£i lÃªn hÃ¬nh áº£nh (náº¿u cÃ³)
    â†“
Socket.io â†’ PhÃ¡t thÃ´ng bÃ¡o Ä‘áº¿n ngÆ°á»i theo dÃµi
    â†“
Pháº£n há»“i â†’ { success: true, post: {...} }
```

#### **3. Luá»“ng xÃ¡c thá»±c**
```
authRoutes.js:
    â”œâ”€â”€ POST /api/signup â†’ authController.signup() â†’ userModel.create()
    â”œâ”€â”€ POST /api/signin â†’ authController.signin() â†’ userModel.findOne() â†’ JWT token
    â”œâ”€â”€ GET /api/logout â†’ authController.logout() â†’ XÃ³a cookie
    â””â”€â”€ GET /api/me â†’ isAuthenticated â†’ authController.userProfile()
```

#### **4. TÃ­nh nÄƒng thá»i gian thá»±c (Socket.io)**
```
app.js â†’ Khá»Ÿi táº¡o Socket.io
    â†“
Controllers phÃ¡t ra sá»± kiá»‡n:
    â”œâ”€â”€ postController.js â†’ socket.emit('add-like', updatedPost)
    â”œâ”€â”€ postController.js â†’ socket.emit('remove-like', updatedPost)
    â”œâ”€â”€ postController.js â†’ socket.emit('new-comment', updatedComments)
    â””â”€â”€ notificationController.js â†’ socket.emit('new-notification', notification)
    â†“
Frontend láº¯ng nghe (Navbar.js, Home.js, SinglePost.js) nháº­n cáº­p nháº­t
```

### Kiáº¿n trÃºc Frontend

#### **1. Äiá»ƒm vÃ o: `index.js` â†’ `App.js`**
```
index.js â†’ Render <App />
    â†“
App.js:
    â”œâ”€â”€ Provider (Redux store)
    â”œâ”€â”€ ProSidebarProvider (Admin sidebar)
    â”œâ”€â”€ BrowserRouter (React Router)
    â””â”€â”€ ToastContainer (ThÃ´ng bÃ¡o)
```

#### **2. Quáº£n lÃ½ State Redux**
```
store.js â†’ Káº¿t há»£p reducers
    â†“
    â”œâ”€â”€ userReducer.js (signIn, signUp, profile, logout)
    â””â”€â”€ notificationReducer.js (notifications, unreadCount)
    â†“
Actions (userAction.js, notificationActions.js):
    â”œâ”€â”€ Gá»i API vá»›i axios
    â”œâ”€â”€ Dispatch actions Ä‘áº¿n reducers
    â””â”€â”€ Cáº­p nháº­t state toÃ n cá»¥c
    â†“
Components káº¿t ná»‘i qua useSelector/useDispatch
```

**VÃ­ dá»¥: Luá»“ng Ä‘Äƒng nháº­p ngÆ°á»i dÃ¹ng**
```
AuthPage.js (Form Ä‘Äƒng nháº­p)
    â†“
userAction.js â†’ userSignInAction()
    â†“
API: POST /api/signin
    â†“
authController.js â†’ XÃ¡c thá»±c thÃ´ng tin â†’ Táº¡o JWT
    â†“
Redux: USER_SIGNIN_SUCCESS â†’ Cáº­p nháº­t store
    â†“
localStorage.setItem('userInfo', data)
    â†“
Äiá»u hÆ°á»›ng Ä‘áº¿n Home â†’ Navbar hiá»ƒn thá»‹ ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p
```

#### **3. Há»‡ thá»‘ng phÃ¢n cáº¥p Component**

**Trang cÃ´ng khai:**
```
App.js
    â””â”€â”€ Routes
        â”œâ”€â”€ Home.js (Nguá»“n cáº¥p chÃ­nh)
        â”‚   â”œâ”€â”€ Navbar.js (Äiá»u hÆ°á»›ng, tÃ¬m kiáº¿m, thÃ´ng bÃ¡o)
        â”‚   â”œâ”€â”€ PostCard.js (Hiá»ƒn thá»‹ bÃ i viáº¿t riÃªng láº»)
        â”‚   â”œâ”€â”€ SmartSearch.jsx (Thanh tÃ¬m kiáº¿m)
        â”‚   â””â”€â”€ Footer.js (LiÃªn káº¿t footer)
        â”‚
        â”œâ”€â”€ SinglePost.js (Chi tiáº¿t bÃ i viáº¿t)
        â”‚   â”œâ”€â”€ Navbar.js
        â”‚   â”œâ”€â”€ CommentList.js (CÃ¡c má»¥c bÃ¬nh luáº­n)
        â”‚   â””â”€â”€ Footer.js
        â”‚
        â”œâ”€â”€ SearchResults.js (Káº¿t quáº£ tÃ¬m kiáº¿m)
        â”‚   â”œâ”€â”€ Navbar.js
        â”‚   â”œâ”€â”€ SmartSearch.jsx
        â”‚   â”œâ”€â”€ PostCard.js (Káº¿t quáº£)
        â”‚   â””â”€â”€ Footer.js
        â”‚
        â””â”€â”€ AuthPage.js (ÄÄƒng nháº­p/ÄÄƒng kÃ½)
```

**Trang ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c báº£o vá»‡:**
```
UserRoute.js (Wrapper báº£o vá»‡)
    â””â”€â”€ Profile.js (Chá»‰nh sá»­a há»“ sÆ¡ ngÆ°á»i dÃ¹ng)
        â””â”€â”€ Navbar.js + Footer.js
```

**Trang Admin:**
```
AdminRoute.js (Wrapper chá»‰ dÃ nh cho admin)
    â””â”€â”€ Layout.js (Admin HOC)
        â”œâ”€â”€ Sidebar.js (Äiá»u hÆ°á»›ng)
        â”œâ”€â”€ HeaderTop.js (Header)
        â””â”€â”€ Trang Admin:
            â”œâ”€â”€ AdminDashboard.js (PhÃ¢n tÃ­ch)
            â”œâ”€â”€ ManagePosts.js (Quáº£n lÃ½ bÃ i viáº¿t)
            â”œâ”€â”€ ManageUsers.js (Quáº£n lÃ½ ngÆ°á»i dÃ¹ng)
            â”œâ”€â”€ ManageContacts.js (Quáº£n lÃ½ liÃªn há»‡)
            â”œâ”€â”€ CreatePost.js (Táº¡o bÃ i viáº¿t)
            â””â”€â”€ EditPost.js (Sá»­a bÃ i viáº¿t)
```

#### **4. Luá»“ng cáº­p nháº­t thá»i gian thá»±c**
```
Káº¿t ná»‘i Socket.io (Navbar.js, Home.js):
    â†“
Backend phÃ¡t ra sá»± kiá»‡n â†’ Frontend láº¯ng nghe
    â†“
Cáº­p nháº­t state local â†’ Render láº¡i component
    â†“
VÃ­ dá»¥: ThÃ´ng bÃ¡o Like
        Backend: postController â†’ socket.emit('new-notification')
        Frontend: NotificationMenu.js â†’ Nháº­n â†’ TÄƒng sá»‘ Ä‘áº¿m badge
```

---

## ğŸ”§ Giáº£i thÃ­ch chi tiáº¿t cÃ¡c File quan trá»ng

### CÃ¡c File cá»‘t lÃµi Backend

#### **`app.js`** - Cáº¥u hÃ¬nh Server chÃ­nh
- Khá»Ÿi táº¡o á»©ng dá»¥ng Express
- Káº¿t ná»‘i MongoDB sá»­ dá»¥ng Mongoose
- Thiáº¿t láº­p middleware: helmet (báº£o máº­t), cors, body-parser, cookie-parser, rate limiting
- Cáº¥u hÃ¬nh Socket.io cho tÃ­nh nÄƒng thá»i gian thá»±c
- Gáº¯n cÃ¡c API routes (`/api/*`)
- Triá»ƒn khai xá»­ lÃ½ lá»—i toÃ n cá»¥c
- Khá»Ÿi Ä‘á»™ng HTTP server trÃªn cá»•ng Ä‘Ã£ cáº¥u hÃ¬nh

#### **`controllers/authController.js`** - Logic xÃ¡c thá»±c
- **signup()**: ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng má»›i, mÃ£ hÃ³a máº­t kháº©u vá»›i bcrypt
- **signin()**: XÃ¡c thá»±c thÃ´ng tin Ä‘Äƒng nháº­p, táº¡o JWT token, Ä‘áº·t HTTP-only cookie
- **logout()**: XÃ³a cookie xÃ¡c thá»±c
- **userProfile()**: Láº¥y thÃ´ng tin chi tiáº¿t ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p
- **updateUserProfile()**: Cáº­p nháº­t thÃ´ng tin ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u
- **uploadAvatar()**: Táº£i avatar ngÆ°á»i dÃ¹ng lÃªn Cloudinary
- **getAllUsers()**: Admin - láº¥y táº¥t cáº£ ngÆ°á»i dÃ¹ng
- **updateUserRole()**: Admin - thay Ä‘á»•i vai trÃ² ngÆ°á»i dÃ¹ng
- **deleteUser()**: Admin - xÃ³a tÃ i khoáº£n ngÆ°á»i dÃ¹ng

#### **`controllers/postController.js`** - Quáº£n lÃ½ bÃ i viáº¿t
- **createPost()**: Táº¡o bÃ i viáº¿t má»›i vá»›i táº£i hÃ¬nh áº£nh lÃªn Cloudinary
- **singlePost()**: Láº¥y bÃ i viáº¿t Ä‘Æ¡n theo ID vá»›i thÃ´ng tin tÃ¡c giáº£ Ä‘áº§y Ä‘á»§
- **showPosts()**: Láº¥y táº¥t cáº£ bÃ i viáº¿t vá»›i phÃ¢n trang
- **userPosts()**: Láº¥y bÃ i viáº¿t cá»§a ngÆ°á»i dÃ¹ng cá»¥ thá»ƒ
- **deletePost()**: XÃ³a bÃ i viáº¿t vÃ  hÃ¬nh áº£nh liÃªn quan
- **updatePost()**: Cáº­p nháº­t ná»™i dung/hÃ¬nh áº£nh bÃ i viáº¿t
- **addLike()**: ThÃªm lÆ°á»£t thÃ­ch cho bÃ i viáº¿t (thá»i gian thá»±c qua socket.io)
- **removeLike()**: XÃ³a lÆ°á»£t thÃ­ch khá»i bÃ i viáº¿t
- **addComment()**: ThÃªm bÃ¬nh luáº­n cho bÃ i viáº¿t (thá»i gian thá»±c qua socket.io)
- **searchPosts()**: TÃ¬m kiáº¿m nÃ¢ng cao vá»›i khá»›p má» vÃ  tÃ­nh Ä‘iá»ƒm liÃªn quan
- **getTrendingTopics()**: Láº¥y danh má»¥c thá»‹nh hÃ nh dá»±a trÃªn má»©c Ä‘á»™ tÆ°Æ¡ng tÃ¡c
- **getSuggestedUsers()**: Láº¥y ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c Ä‘á» xuáº¥t dá»±a trÃªn hoáº¡t Ä‘á»™ng

#### **`models/userModel.js`** - Schema ngÆ°á»i dÃ¹ng
- CÃ¡c trÆ°á»ng: name, email, password (Ä‘Ã£ mÃ£ hÃ³a), avatar (Cloudinary), role (user/admin)
- Pre-save hook: MÃ£ hÃ³a máº­t kháº©u vá»›i bcrypt trÆ°á»›c khi lÆ°u
- CÃ¡c phÆ°Æ¡ng thá»©c:
  - `comparePassword()`: So sÃ¡nh máº­t kháº©u Ä‘Äƒng nháº­p vá»›i máº­t kháº©u Ä‘Ã£ mÃ£ hÃ³a
  - `getJwtToken()`: Táº¡o JWT token vá»›i ID ngÆ°á»i dÃ¹ng
  - `posts` virtual: Äiá»n cÃ¡c bÃ i viáº¿t cá»§a ngÆ°á»i dÃ¹ng

#### **`models/postModel.js`** - Schema bÃ i viáº¿t
- CÃ¡c trÆ°á»ng: category, content (HTML), image (Cloudinary), likes[], comments[], postedBy (ref: User)
- Timestamps: createdAt, updatedAt
- CÃ¡c trÆ°á»ng Ä‘Æ°á»£c Ä‘iá»n: postedBy vá»›i thÃ´ng tin chi tiáº¿t ngÆ°á»i dÃ¹ng
- Virtual: TÃ­nh toÃ¡n Ä‘iá»ƒm tÆ°Æ¡ng tÃ¡c

#### **`middleware/auth.js`** - Middleware xÃ¡c thá»±c
- **isAuthenticated()**: XÃ¡c minh JWT token tá»« cookie, gáº¯n user vÃ o req
- **isAdmin()**: Kiá»ƒm tra xem ngÆ°á»i dÃ¹ng Ä‘Ã£ xÃ¡c thá»±c cÃ³ vai trÃ² admin khÃ´ng
- ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ báº£o vá»‡ cÃ¡c route yÃªu cáº§u Ä‘Äƒng nháº­p hoáº·c quyá»n truy cáº­p admin

### CÃ¡c File cá»‘t lÃµi Frontend

#### **`App.js`** - Router á»©ng dá»¥ng chÃ­nh
- Bá»c á»©ng dá»¥ng vá»›i Redux Provider, ProSidebarProvider, BrowserRouter
- Äá»‹nh nghÄ©a táº¥t cáº£ cÃ¡c routes cá»§a á»©ng dá»¥ng (cÃ´ng khai, ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c báº£o vá»‡, admin Ä‘Æ°á»£c báº£o vá»‡)
- Sá»­ dá»¥ng máº«u HOC cho cÃ¡c trang admin (Layout wrapper)
- TÃ­ch há»£p ToastContainer cho thÃ´ng bÃ¡o toÃ n cá»¥c

#### **`redux/store.js`** - Cáº¥u hÃ¬nh Redux Store
- Káº¿t há»£p cÃ¡c reducers: signIn, signUp, logOut, userProfile, notifications
- Khá»Ÿi táº¡o state tá»« localStorage (duy trÃ¬ Ä‘Äƒng nháº­p ngÆ°á»i dÃ¹ng)
- Ãp dá»¥ng thunk middleware cho cÃ¡c action báº¥t Ä‘á»“ng bá»™
- TÃ­ch há»£p Redux DevTools Ä‘á»ƒ debug

#### **`redux/actions/userAction.js`** - Actions ngÆ°á»i dÃ¹ng
- **userSignInAction()**: POST /api/signin, lÆ°u vÃ o localStorage, dispatch success
- **userSignUpAction()**: POST /api/signup, hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
- **userLogoutAction()**: GET /api/logout, xÃ³a khá»i localStorage
- **userProfileAction()**: GET /api/me, táº£i dá»¯ liá»‡u há»“ sÆ¡ ngÆ°á»i dÃ¹ng

#### **`redux/actions/notificationActions.js`** - Actions thÃ´ng bÃ¡o
- **notificationsLoadAction()**: GET /api/notifications, táº£i táº¥t cáº£ thÃ´ng bÃ¡o
- **markNotificationReadAction()**: PUT /api/notifications/:id/read
- **markAllNotificationsReadAction()**: PUT /api/notifications/read-all
- **addNewNotification()**: ThÃªm thÃ´ng bÃ¡o má»›i tá»« socket.io

#### **`components/Navbar.js`** - Äiá»u hÆ°á»›ng chÃ­nh
- Thanh Ä‘iá»u hÆ°á»›ng responsive vá»›i logo, liÃªn káº¿t menu
- TÃ­ch há»£p component SmartSearch
- NotificationMenu vá»›i sá»‘ Ä‘áº¿m badge thá»i gian thá»±c
- Menu ngÆ°á»i dÃ¹ng vá»›i há»“ sÆ¡, báº£ng Ä‘iá»u khiá»ƒn admin (náº¿u lÃ  admin), Ä‘Äƒng xuáº¥t
- Láº¯ng nghe Socket.io cho thÃ´ng bÃ¡o má»›i
- Táº£i há»“ sÆ¡ ngÆ°á»i dÃ¹ng vÃ  thÃ´ng bÃ¡o khi mount

#### **`components/PostCard.js`** - Card bÃ i viáº¿t kiá»ƒu Instagram
- Hiá»ƒn thá»‹ bÃ i viáº¿t vá»›i avatar tÃ¡c giáº£, tÃªn, danh má»¥c, thá»i gian
- Ná»™i dung vá»›i "Äá»c thÃªm" má»Ÿ rá»™ng/thu gá»n
- Hiá»ƒn thá»‹ hÃ¬nh áº£nh (náº¿u cÃ³)
- NÃºt thÃ­ch/bá» thÃ­ch vá»›i biá»ƒu tÆ°á»£ng trÃ¡i tim (mÃ u Ä‘á» khi Ä‘Ã£ thÃ­ch)
- Sá»‘ lÆ°á»£ng bÃ¬nh luáº­n vÃ  liÃªn káº¿t Ä‘áº¿n chi tiáº¿t bÃ i viáº¿t
- Menu Sá»­a/XÃ³a cho chá»§ bÃ i viáº¿t hoáº·c admin
- Xá»­ lÃ½ socket.io cho cáº­p nháº­t lÆ°á»£t thÃ­ch thá»i gian thá»±c

#### **`components/NotificationMenu.js`** - Menu dropdown thÃ´ng bÃ¡o
- Badge vá»›i sá»‘ lÆ°á»£ng chÆ°a Ä‘á»c
- Menu dropdown vá»›i danh sÃ¡ch thÃ´ng bÃ¡o
- Click thÃ´ng bÃ¡o â†’ Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c â†’ Ä‘iá»u hÆ°á»›ng Ä‘áº¿n bÃ i viáº¿t
- NÃºt "ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c"
- Cáº­p nháº­t thá»i gian thá»±c qua socket.io
- Thá»i gian vá»›i Ä‘á»‹nh dáº¡ng "cÃ¡ch Ä‘Ã¢y"

#### **`pages/Home.js`** - Nguá»“n cáº¥p trang chá»§
- Bá»‘ cá»¥c ba cá»™t: Sidebar bá»™ lá»c | Nguá»“n cáº¥p bÃ i viáº¿t | Sidebar thá»‹nh hÃ nh
- **Sidebar trÃ¡i**: Bá»™ lá»c danh má»¥c, tÃ¹y chá»n sáº¯p xáº¿p (Má»›i nháº¥t, Phá»• biáº¿n nháº¥t, Nhiá»u bÃ¬nh luáº­n nháº¥t)
- **Trung tÃ¢m**: Nguá»“n cáº¥p bÃ i viáº¿t (má»™t bÃ i viáº¿t má»—i hÃ ng), nÃºt táº¡o bÃ i viáº¿t, hiá»ƒn thá»‹ bá»™ lá»c Ä‘ang hoáº¡t Ä‘á»™ng
- **Sidebar pháº£i**: Chá»§ Ä‘á» thá»‹nh hÃ nh (dá»¯ liá»‡u thá»±c), ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c Ä‘á» xuáº¥t (dá»¯ liá»‡u thá»±c)
- Láº¯ng nghe Socket.io cho cáº­p nháº­t lÆ°á»£t thÃ­ch thá»i gian thá»±c
- Báº£o vá»‡ giá»›i háº¡n tá»‘c Ä‘á»™ vá»›i xá»­ lÃ½ lá»—i
- Responsive: áº¨n sidebar trÃªn mobile

#### **`pages/SinglePost.js`** - Trang chi tiáº¿t bÃ i viáº¿t
- Ná»™i dung bÃ i viáº¿t Ä‘áº§y Ä‘á»§ vá»›i render HTML
- ThÃ´ng tin tÃ¡c giáº£ vÃ  thá»i gian
- Menu Sá»­a/XÃ³a cho chá»§ sá»Ÿ há»¯u hoáº·c admin
- Pháº§n bÃ¬nh luáº­n vá»›i form (chá»‰ ngÆ°á»i dÃ¹ng Ä‘Ã£ xÃ¡c thá»±c)
- Cáº­p nháº­t bÃ¬nh luáº­n thá»i gian thá»±c qua socket.io
- Cáº­p nháº­t UI láº¡c quan cho bÃ¬nh luáº­n
- Sidebar pháº£i vá»›i thá»‘ng kÃª bÃ i viáº¿t

#### **`pages/SearchResults.js`** - Káº¿t quáº£ tÃ¬m kiáº¿m
- TÃ­ch há»£p thanh tÃ¬m kiáº¿m thÃ´ng minh
- Banner thÃ´ng tin tÃ¬m kiáº¿m vá»›i sá»‘ lÆ°á»£ng káº¿t quáº£
- Chuyá»ƒn Ä‘á»•i sáº¯p xáº¿p: LiÃªn quan, Gáº§n Ä‘Ã¢y nháº¥t, Phá»• biáº¿n nháº¥t
- PhÃ¢n trang cho káº¿t quáº£
- Huy hiá»‡u "Khá»›p tá»‘t nháº¥t" cho Ä‘iá»ƒm liÃªn quan cao
- Tráº¡ng thÃ¡i rá»—ng vá»›i gá»£i Ã½

#### **`pages/Profile.js`** - Há»“ sÆ¡ ngÆ°á»i dÃ¹ng
- Bá»‘ cá»¥c hai cá»™t: Card há»“ sÆ¡ | Form chá»‰nh sá»­a
- Táº£i lÃªn avatar vá»›i xem trÆ°á»›c (Cloudinary)
- Chuyá»ƒn Ä‘á»•i cháº¿ Ä‘á»™ chá»‰nh sá»­a cho thÃ´ng tin há»“ sÆ¡
- Pháº§n Ä‘á»•i máº­t kháº©u (tÃ¹y chá»n)
- Huy hiá»‡u vai trÃ² (Admin/User)
- NgÃ y tham gia

#### **`admin/AdminDashboard.js`** - Báº£ng phÃ¢n tÃ­ch
- CÃ¡c card thá»‘ng kÃª: Tá»•ng bÃ i viáº¿t, ngÆ°á»i dÃ¹ng, liÃªn há»‡, lÆ°á»£t thÃ­ch, bÃ¬nh luáº­n
- Chá»‰ sá»‘ tÄƒng trÆ°á»Ÿng (xu hÆ°á»›ng tÄƒng/giáº£m)
- Danh má»¥c hÃ ng Ä‘áº§u vá»›i thanh tiáº¿n trÃ¬nh
- BÃ i viáº¿t cÃ³ hiá»‡u suáº¥t tá»‘t nháº¥t
- NgÆ°á»i Ä‘Ã³ng gÃ³p tÃ­ch cá»±c nháº¥t
- Dá»¯ liá»‡u thá»i gian thá»±c tá»« API
- Bá»‘ cá»¥c lÆ°á»›i responsive

#### **`admin/ManagePosts.js`** - Quáº£n lÃ½ bÃ i viáº¿t
- Báº£ng DataGrid vá»›i táº¥t cáº£ bÃ i viáº¿t
- Thanh tÃ¬m kiáº¿m Ä‘á»ƒ lá»c
- CÃ¡c cá»™t: HÃ¬nh áº£nh, TiÃªu Ä‘á», Danh má»¥c, TÃ¡c giáº£, LÆ°á»£t thÃ­ch, BÃ¬nh luáº­n, NgÃ y
- HÃ nh Ä‘á»™ng: Sá»­a, XÃ³a
- NÃºt "Táº¡o bÃ i viáº¿t má»›i"
- Lá»±a chá»n checkbox cho hÃ nh Ä‘á»™ng hÃ ng loáº¡t

#### **`admin/ManageUsers.js`** - Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
- Báº£ng DataGrid vá»›i táº¥t cáº£ ngÆ°á»i dÃ¹ng
- Thanh tÃ¬m kiáº¿m Ä‘á»ƒ lá»c
- CÃ¡c cá»™t: NgÆ°á»i dÃ¹ng (avatar + tÃªn + email), Vai trÃ², BÃ i viáº¿t, LÆ°á»£t thÃ­ch, BÃ¬nh luáº­n, NgÃ y tham gia, Tráº¡ng thÃ¡i
- HÃ nh Ä‘á»™ng: Äá»•i vai trÃ², XÃ³a
- Dialog Ä‘á»•i vai trÃ² (User â†” Admin)
- Tráº¡ng thÃ¡i Hoáº¡t Ä‘á»™ng/KhÃ´ng hoáº¡t Ä‘á»™ng dá»±a trÃªn hoáº¡t Ä‘á»™ng cuá»‘i cÃ¹ng

#### **`admin/ManageContacts.js`** - Quáº£n lÃ½ liÃªn há»‡
- CÃ¡c card thá»‘ng kÃª: Tá»•ng, Äang chá», ÄÃ£ tráº£ lá»i, ÄÃ£ Ä‘Ã³ng
- Báº£ng DataGrid vá»›i táº¥t cáº£ tin nháº¯n liÃªn há»‡
- Thanh tÃ¬m kiáº¿m vÃ  bá»™ lá»c tráº¡ng thÃ¡i
- HÃ nh Ä‘á»™ng: Xem chi tiáº¿t, Tráº£ lá»i/Cáº­p nháº­t tráº¡ng thÃ¡i, XÃ³a
- Dialog xem vá»›i chi tiáº¿t tin nháº¯n Ä‘áº§y Ä‘á»§
- Dialog tráº£ lá»i vá»›i thay Ä‘á»•i tráº¡ng thÃ¡i vÃ  tin nháº¯n

---

## ğŸ”„ CÃ¡c API Endpoints

### Routes xÃ¡c thá»±c (`/api`)
```javascript
POST   /api/signup              // ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng má»›i
POST   /api/signin              // ÄÄƒng nháº­p ngÆ°á»i dÃ¹ng (tráº£ vá» JWT cookie)
GET    /api/logout              // ÄÄƒng xuáº¥t ngÆ°á»i dÃ¹ng (xÃ³a cookie)
GET    /api/me                  // Láº¥y há»“ sÆ¡ ngÆ°á»i dÃ¹ng hiá»‡n táº¡i (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/user/update         // Cáº­p nháº­t há»“ sÆ¡ ngÆ°á»i dÃ¹ng (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/update/avatar       // Táº£i lÃªn/cáº­p nháº­t avatar (Ä‘Æ°á»£c báº£o vá»‡)
GET    /api/users               // Láº¥y táº¥t cáº£ ngÆ°á»i dÃ¹ng (chá»‰ admin)
PUT    /api/user/role/:id       // Cáº­p nháº­t vai trÃ² ngÆ°á»i dÃ¹ng (chá»‰ admin)
DELETE /api/user/delete/:id     // XÃ³a ngÆ°á»i dÃ¹ng (chá»‰ admin)
```

### Routes bÃ i viáº¿t (`/api`)
```javascript
GET    /api/posts/show          // Láº¥y táº¥t cáº£ bÃ i viáº¿t (cÃ³ phÃ¢n trang)
GET    /api/post/:id            // Láº¥y bÃ i viáº¿t Ä‘Æ¡n theo ID
POST   /api/post/create         // Táº¡o bÃ i viáº¿t má»›i (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/post/update/:id     // Cáº­p nháº­t bÃ i viáº¿t (Ä‘Æ°á»£c báº£o vá»‡, chá»§ sá»Ÿ há»¯u/admin)
DELETE /api/post/delete/:id     // XÃ³a bÃ i viáº¿t (Ä‘Æ°á»£c báº£o vá»‡, chá»§ sá»Ÿ há»¯u/admin)
DELETE /api/delete/post/:id     // XÃ³a bÃ i viáº¿t (chá»‰ admin)
PUT    /api/addlike/post/:id    // ThÃªm lÆ°á»£t thÃ­ch cho bÃ i viáº¿t (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/removelike/post/:id // XÃ³a lÆ°á»£t thÃ­ch khá»i bÃ i viáº¿t (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/comment/post/:id    // ThÃªm bÃ¬nh luáº­n cho bÃ i viáº¿t (Ä‘Æ°á»£c báº£o vá»‡)
GET    /api/posts/user/:id      // Láº¥y bÃ i viáº¿t theo ngÆ°á»i dÃ¹ng
GET    /api/posts/search        // TÃ¬m kiáº¿m bÃ i viáº¿t (query params: query, sortBy, page, limit)
GET    /api/posts/trending-topics // Láº¥y danh má»¥c thá»‹nh hÃ nh
GET    /api/posts/suggested-users // Láº¥y ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c Ä‘á» xuáº¥t
```

### Routes thÃ´ng bÃ¡o (`/api`)
```javascript
GET    /api/notifications       // Láº¥y táº¥t cáº£ thÃ´ng bÃ¡o (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/notifications/:id/read // ÄÃ¡nh dáº¥u thÃ´ng bÃ¡o Ä‘Ã£ Ä‘á»c (Ä‘Æ°á»£c báº£o vá»‡)
PUT    /api/notifications/read-all // ÄÃ¡nh dáº¥u táº¥t cáº£ Ä‘Ã£ Ä‘á»c (Ä‘Æ°á»£c báº£o vá»‡)
POST   /api/notification/create // Táº¡o thÃ´ng bÃ¡o (sá»­ dá»¥ng ná»™i bá»™)
```

### Routes liÃªn há»‡ (`/api`)
```javascript
GET    /api/contacts            // Láº¥y táº¥t cáº£ liÃªn há»‡ (chá»‰ admin)
POST   /api/contact/create      // Táº¡o tin nháº¯n liÃªn há»‡ (cÃ´ng khai)
PUT    /api/contact/status/:id  // Cáº­p nháº­t tráº¡ng thÃ¡i liÃªn há»‡ (chá»‰ admin)
DELETE /api/contact/delete/:id  // XÃ³a liÃªn há»‡ (chá»‰ admin)
```

---

## ğŸ› ï¸ CÃ´ng nghá»‡ sá»­ dá»¥ng

### Backend
- **Node.js** - MÃ´i trÆ°á»ng cháº¡y JavaScript
- **Express.js** - Framework web
- **MongoDB** - CÆ¡ sá»Ÿ dá»¯ liá»‡u NoSQL
- **Mongoose** - ODM cho MongoDB
- **Socket.io** - Giao tiáº¿p hai chiá»u thá»i gian thá»±c
- **JWT** - JSON Web Tokens cho xÃ¡c thá»±c
- **bcryptjs** - MÃ£ hÃ³a máº­t kháº©u
- **Cloudinary** - Táº£i lÃªn vÃ  lÆ°u trá»¯ hÃ¬nh áº£nh
- **helmet** - Middleware báº£o máº­t
- **express-rate-limit** - Giá»›i háº¡n tá»‘c Ä‘á»™ request
- **express-mongo-sanitize** - NgÄƒn cháº·n NoSQL injection
- **hpp** - Báº£o vá»‡ chá»‘ng Ã´ nhiá»…m tham sá»‘ HTTP
- **cors** - Chia sáº» tÃ i nguyÃªn giá»¯a cÃ¡c nguá»“n
- **cookie-parser** - PhÃ¢n tÃ­ch cookie
- **dotenv** - Biáº¿n mÃ´i trÆ°á»ng

### Frontend
- **React 18** - ThÆ° viá»‡n UI
- **Material-UI (MUI)** - ThÆ° viá»‡n component
- **Redux** - Quáº£n lÃ½ tráº¡ng thÃ¡i
- **Redux Thunk** - Middleware xá»­ lÃ½ action báº¥t Ä‘á»“ng bá»™
- **React Router v6** - Äá»‹nh tuyáº¿n
- **Socket.io-client** - Client thá»i gian thá»±c
- **Axios** - HTTP client
- **Formik** - Xá»­ lÃ½ form
- **Yup** - Validation form
- **ReactQuill** - TrÃ¬nh soáº¡n tháº£o vÄƒn báº£n phong phÃº
- **react-dropzone** - Táº£i lÃªn file
- **react-toastify** - ThÃ´ng bÃ¡o toast
- **react-pro-sidebar** - Sidebar admin
- **@mui/x-data-grid** - Báº£ng dá»¯ liá»‡u
- **moment** - Äá»‹nh dáº¡ng ngÃ y thÃ¡ng

---


ğŸ” Thuáº­t toÃ¡n tÃ¬m kiáº¿m
Dá»± Ã¡n sá»­ dá»¥ng tÃ­nh nÄƒng tÃ¬m kiáº¿m thÃ´ng minh cho bÃ i viáº¿t dá»±a trÃªn text search vÃ  aggregation pipeline cá»§a MongoDB. Khi ngÆ°á»i dÃ¹ng nháº­p tá»« khÃ³a, backend sá»­ dá»¥ng toÃ¡n tá»­ $text cá»§a MongoDB Ä‘á»ƒ tÃ¬m kiáº¿m trÃªn cÃ¡c trÆ°á»ng liÃªn quan (vÃ­ dá»¥: tiÃªu Ä‘á», ná»™i dung) vÃ  sáº¯p xáº¿p káº¿t quáº£ theo Ä‘á»™ phÃ¹ há»£p. Äá»ƒ lá»c nÃ¢ng cao vÃ  sáº¯p xáº¿p, aggregation pipeline Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ káº¿t há»£p tÃ¬m kiáº¿m, lá»c theo danh má»¥c vÃ  phÃ¢n trang hiá»‡u quáº£.

Ká»¹ thuáº­t chÃ­nh:

Nháº­n yÃªu cáº§u tÃ¬m kiáº¿m/tá»•ng há»£p tá»« frontend
NgÆ°á»i dÃ¹ng nháº­p tá»« khÃ³a, chá»n bá»™ lá»c, hoáº·c yÃªu cáº§u thá»‘ng kÃª (vÃ­ dá»¥: tÃ¬m bÃ i viáº¿t, xem top danh má»¥c).

Backend nháº­n request vÃ  xÃ¢y dá»±ng pipeline
Controller (vÃ­ dá»¥: postController.js) táº¡o má»™t máº£ng cÃ¡c stage cho pipeline, gá»“m cÃ¡c bÆ°á»›c nhÆ°:

$match: Lá»c dá»¯ liá»‡u theo Ä‘iá»u kiá»‡n (tá»« khÃ³a, danh má»¥c, tráº¡ng thÃ¡iâ€¦)
$sort: Sáº¯p xáº¿p káº¿t quáº£ (theo thá»i gian, Ä‘á»™ phÃ¹ há»£pâ€¦)
$skip vÃ  $limit: PhÃ¢n trang káº¿t quáº£.
$group: NhÃ³m dá»¯ liá»‡u Ä‘á»ƒ thá»‘ng kÃª (vÃ­ dá»¥: Ä‘áº¿m sá»‘ bÃ i theo user hoáº·c danh má»¥c).
$project: Chá»n trÆ°á»ng cáº§n tráº£ vá».
Gá»­i pipeline cho MongoDB xá»­ lÃ½
Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c .aggregate(pipeline) cá»§a Mongoose Model Ä‘á»ƒ thá»±c thi pipeline.

Nháº­n káº¿t quáº£ vÃ  tráº£ vá» cho frontend
Backend nháº­n káº¿t quáº£ Ä‘Ã£ tá»•ng há»£p/tÃ¬m kiáº¿m, tráº£ vá» cho frontend Ä‘á»ƒ hiá»ƒn thá»‹ cho ngÆ°á»i dÃ¹ng.

Frontend hiá»ƒn thá»‹ dá»¯ liá»‡u
Giao diá»‡n nháº­n dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½, hiá»ƒn thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m, thá»‘ng kÃª, hoáº·c danh sÃ¡ch bÃ i viáº¿t.
## ğŸš¦ Báº¯t Ä‘áº§u

### YÃªu cáº§u
- Node.js (v14 hoáº·c cao hÆ¡n)
- MongoDB (cá»¥c bá»™ hoáº·c MongoDB Atlas)
- TÃ i khoáº£n Cloudinary (Ä‘á»ƒ táº£i lÃªn hÃ¬nh áº£nh)

### CÃ i Ä‘áº·t

1. **Clone repository**
   ```bash
   git clone https://github.com/Quangsonz/BLog-mern-app.git
   cd BLog-mern-app
   ```

2. **CÃ i Ä‘áº·t Backend**
   ```bash
   cd backend
   npm install
   ```

   Táº¡o file `.env` trong thÆ° má»¥c `backend/`:
   ```env
   PORT=9000
   DATABASE=mongodb://localhost:27017/blog-mern
   # Hoáº·c MongoDB Atlas:
   # DATABASE=mongodb+srv://username:password@cluster.mongodb.net/blog-mern
   
   JWT_SECRET=your_jwt_secret_key_here
   EXPIRE_TOKEN=7d
   
   CLOUDINARY_NAME=your_cloudinary_name
   CLOUDINARY_API_KEY=your_cloudinary_api_key
   CLOUDINARY_SECRET=your_cloudinary_secret
   
   NODE_ENV=development
   ```

3. **CÃ i Ä‘áº·t Frontend**
   ```bash
   cd frontend
   npm install
   ```

   Táº¡o file `.env` trong thÆ° má»¥c `frontend/`:
   ```env
   REACT_APP_API_URL=http://localhost:9000
   ```

   Cáº­p nháº­t proxy trong `package.json` (náº¿u cáº§n):
   ```json
   "proxy": "http://localhost:9000"
   ```

4. **Cháº¡y á»©ng dá»¥ng**

   **Backend (Terminal 1):**
   ```bash
   cd backend
   npm start
   # Hoáº·c dÃ¹ng nodemon cho mÃ´i trÆ°á»ng phÃ¡t triá»ƒn:
   npm run dev
   ```

   **Frontend (Terminal 2):**
   ```bash
   cd frontend
   npm start
   ```

5. **Truy cáº­p á»©ng dá»¥ng**
   - Frontend: `http://localhost:3000`
   - Backend API: `http://localhost:9000`

### TÃ i khoáº£n Admin máº·c Ä‘á»‹nh
Sau khi cháº¡y láº§n Ä‘áº§u, táº¡o tÃ i khoáº£n admin thá»§ cÃ´ng hoáº·c Ä‘Äƒng kÃ½ vÃ  cáº­p nháº­t trong MongoDB:
```javascript
// Trong MongoDB, cáº­p nháº­t vai trÃ² ngÆ°á»i dÃ¹ng:
db.users.updateOne(
  { email: "admin@example.com" },
  { $set: { role: "admin" } }
)
```

---

## ğŸ“ HÆ°á»›ng dáº«n sá»­ dá»¥ng

### DÃ nh cho ngÆ°á»i dÃ¹ng
1. **ÄÄƒng kÃ½** - Táº¡o tÃ i khoáº£n trÃªn trang Ä‘Äƒng kÃ½
2. **ÄÄƒng nháº­p** - ÄÄƒng nháº­p vá»›i thÃ´ng tin xÃ¡c thá»±c cá»§a báº¡n
3. **Xem bÃ i viáº¿t** - Xem bÃ i viáº¿t trÃªn trang chá»§, lá»c theo danh má»¥c, sáº¯p xáº¿p theo má»›i nháº¥t/phá»• biáº¿n
4. **Táº¡o bÃ i viáº¿t** - Nháº¥p vÃ o nÃºt "Táº¡o bÃ i viáº¿t", Ä‘iá»n danh má»¥c, ná»™i dung vÃ  hÃ¬nh áº£nh tÃ¹y chá»n
5. **ThÃ­ch & BÃ¬nh luáº­n** - TÆ°Æ¡ng tÃ¡c vá»›i bÃ i viáº¿t báº±ng cÃ¡ch thÃ­ch vÃ  bÃ¬nh luáº­n
6. **TÃ¬m kiáº¿m** - Sá»­ dá»¥ng thanh tÃ¬m kiáº¿m thÃ´ng minh Ä‘á»ƒ tÃ¬m bÃ i viáº¿t
7. **Há»“ sÆ¡** - Cáº­p nháº­t há»“ sÆ¡, Ä‘á»•i máº­t kháº©u, táº£i lÃªn avatar
8. **ThÃ´ng bÃ¡o** - Nháº­n thÃ´ng bÃ¡o thá»i gian thá»±c cho lÆ°á»£t thÃ­ch vÃ  bÃ¬nh luáº­n

### DÃ nh cho quáº£n trá»‹ viÃªn
1. **Truy cáº­p báº£ng Ä‘iá»u khiá»ƒn Admin** - Nháº¥p vÃ o "Báº£ng Ä‘iá»u khiá»ƒn Admin" trong menu ngÆ°á»i dÃ¹ng
2. **Xem phÃ¢n tÃ­ch** - Xem sá»‘ liá»‡u thá»‘ng kÃª toÃ n diá»‡n trÃªn báº£ng Ä‘iá»u khiá»ƒn
3. **Quáº£n lÃ½ bÃ i viáº¿t** - Xem, chá»‰nh sá»­a, xÃ³a báº¥t ká»³ bÃ i viáº¿t nÃ o
4. **Quáº£n lÃ½ ngÆ°á»i dÃ¹ng** - Xem táº¥t cáº£ ngÆ°á»i dÃ¹ng, thay Ä‘á»•i vai trÃ², xÃ³a tÃ i khoáº£n
5. **Quáº£n lÃ½ liÃªn há»‡** - Xem tin nháº¯n liÃªn há»‡, tráº£ lá»i, thay Ä‘á»•i tráº¡ng thÃ¡i
6. **Táº¡o ná»™i dung** - Táº¡o vÃ  chá»‰nh sá»­a bÃ i viáº¿t thÃ´ng qua báº£ng Ä‘iá»u khiá»ƒn admin

---

## ğŸ” TÃ­nh nÄƒng báº£o máº­t

1. **XÃ¡c thá»±c**
   - Token JWT Ä‘Æ°á»£c lÆ°u trong HTTP-only cookies
   - MÃ£ hÃ³a máº­t kháº©u báº±ng bcrypt (10 salt rounds)
   - ÄÄƒng xuáº¥t an toÃ n vá»›i xÃ³a cookie

2. **PhÃ¢n quyá»n**
   - Kiá»ƒm soÃ¡t truy cáº­p dá»±a trÃªn vai trÃ² (User/Admin)
   - Routes Ä‘Æ°á»£c báº£o vá»‡ báº±ng middleware
   - Route guards á»Ÿ frontend (AdminRoute, UserRoute)

3. **Validation Ä‘áº§u vÃ o**
   - Validation Formik + Yup á»Ÿ frontend
   - Validation schema Mongoose
   - Express-validator cho API inputs

4. **Middleware báº£o máº­t**
   - Helmet.js cho HTTP headers
   - Cáº¥u hÃ¬nh CORS
   - Giá»›i háº¡n tá»‘c Ä‘á»™ (100 requests má»—i 15 phÃºt)
   - NgÄƒn cháº·n MongoDB injection
   - Báº£o vá»‡ XSS
   - Báº£o vá»‡ chá»‘ng Ã´ nhiá»…m tham sá»‘ HTTP

5. **Báº£o vá»‡ dá»¯ liá»‡u**
   - Máº­t kháº©u khÃ´ng bao giá» Ä‘Æ°á»£c gá»­i trong response
   - LÃ m sáº¡ch dá»¯ liá»‡u ngÆ°á»i dÃ¹ng
   - Táº£i lÃªn hÃ¬nh áº£nh an toÃ n lÃªn Cloudinary

---

## ğŸ§ª Kiá»ƒm thá»­

```bash
# Cháº¡y test frontend
cd frontend
npm test

# Cháº¡y test backend (náº¿u Ä‘Ã£ cáº¥u hÃ¬nh)
cd backend
npm test
```

---

## ğŸ“¦ Triá»ƒn khai

### Triá»ƒn khai Backend (Heroku/Railway/Render)
1. Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng trÃªn ná»n táº£ng
2. Äáº£m báº£o chuá»—i káº¿t ná»‘i MongoDB Atlas
3. Äáº·t `NODE_ENV=production`
4. Triá»ƒn khai backend

### Triá»ƒn khai Frontend (Vercel/Netlify)
1. Build production: `npm run build`
2. Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng
3. Cáº¥u hÃ¬nh redirects cho React Router
4. Triá»ƒn khai frontend










